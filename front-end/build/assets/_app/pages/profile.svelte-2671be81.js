import{S as e,i as t,s as a,e as l,t as n,c as r,a as o,b as s,d as c,f as i,g as u,h,j as f,l as _,k as d,o as m,H as p,I as v,K as g,n as y,B as k,M as T,N as $,J as w,P as E,p as O,q as I,r as N,w as P,x as b,y as x,D as j,E as U,C as S}from"../chunks/index-bf7fb778.js";import{u as C,i as L}from"../chunks/store-5de4d08f.js";import{g as A}from"../chunks/navigation-ecc5701b.js";function M(e,t,a){const l=e.slice();return l[10]=t[a],l}function H(e){let t,a,f,_=e[2].message+"";return{c(){t=l("p"),a=n("Message:"),f=n(_)},l(e){t=r(e,"P",{});var l=o(t);a=s(l,"Message:"),f=s(l,_),l.forEach(c)},m(e,l){i(e,t,l),u(t,a),u(t,f)},p(e,t){4&t&&_!==(_=e[2].message+"")&&h(f,_)},d(e){e&&c(t)}}}function B(e){let t,a,l,r="1"==e[10].user_role_official&&D(),o="1"==e[10].user_role_admin&&J();return{c(){t=n("-User is :"),r&&r.c(),a=f(),o&&o.c(),l=d()},l(e){t=s(e,"-User is :"),r&&r.l(e),a=_(e),o&&o.l(e),l=d()},m(e,n){i(e,t,n),r&&r.m(e,n),i(e,a,n),o&&o.m(e,n),i(e,l,n)},p(e,t){"1"==e[10].user_role_official?r||(r=D(),r.c(),r.m(a.parentNode,a)):r&&(r.d(1),r=null),"1"==e[10].user_role_admin?o||(o=J(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null)},d(e){e&&c(t),r&&r.d(e),e&&c(a),o&&o.d(e),e&&c(l)}}}function D(e){let t;return{c(){t=n("Official")},l(e){t=s(e,"Official")},m(e,a){i(e,t,a)},d(e){e&&c(t)}}}function J(e){let t;return{c(){t=n("Admin")},l(e){t=s(e,"Admin")},m(e,a){i(e,t,a)},d(e){e&&c(t)}}}function G(e){let t,a,o,u,h;return{c(){t=l("input"),o=n("\r\n            Admin"),this.h()},l(e){t=r(e,"INPUT",{type:!0,value:!0}),o=s(e,"\r\n            Admin"),this.h()},h(){m(t,"type","radio"),t.__value=a={correlated_role:"user_role_admin",user_id:e[10].user_id},t.value=t.__value,e[4][0].push(t)},m(a,l){i(a,t,l),t.checked=t.__value===e[0],i(a,o,l),u||(h=p(t,"change",e[3]),u=!0)},p(e,l){2&l&&a!==(a={correlated_role:"user_role_admin",user_id:e[10].user_id})&&(t.__value=a,t.value=t.__value),1&l&&(t.checked=t.__value===e[0])},d(a){a&&c(t),e[4][0].splice(e[4][0].indexOf(t),1),a&&c(o),u=!1,h()}}}function V(e){let t,a,o,u,h;return{c(){t=l("input"),o=n("\r\n            Official"),this.h()},l(e){t=r(e,"INPUT",{type:!0,value:!0}),o=s(e,"\r\n            Official"),this.h()},h(){m(t,"type","radio"),t.__value=a={correlated_role:"user_role_official",user_id:e[10].user_id},t.value=t.__value,e[4][0].push(t)},m(a,l){i(a,t,l),t.checked=t.__value===e[0],i(a,o,l),u||(h=p(t,"change",e[5]),u=!0)},p(e,l){2&l&&a!==(a={correlated_role:"user_role_official",user_id:e[10].user_id})&&(t.__value=a,t.value=t.__value),1&l&&(t.checked=t.__value===e[0])},d(a){a&&c(t),e[4][0].splice(e[4][0].indexOf(t),1),a&&c(o),u=!1,h()}}}function q(e,t){let a,d,m,p,v,g,y,k,T=t[10].user_email+"",$=("1"==t[10].user_role_official||"1"==t[10].user_role_admin)&&B(t),w="1"!=t[10].user_role_admin&&G(t),E="1"!=t[10].user_role_official&&V(t);return{key:e,first:null,c(){a=l("div"),d=l("li"),m=l("div"),p=n(T),v=f(),$&&$.c(),g=f(),w&&w.c(),y=f(),E&&E.c(),k=f(),this.h()},l(e){a=r(e,"DIV",{});var t=o(a);d=r(t,"LI",{});var l=o(d);m=r(l,"DIV",{});var n=o(m);p=s(n,T),v=_(n),$&&$.l(n),n.forEach(c),g=_(l),w&&w.l(l),y=_(l),E&&E.l(l),l.forEach(c),k=_(t),t.forEach(c),this.h()},h(){this.first=a},m(e,t){i(e,a,t),u(a,d),u(d,m),u(m,p),u(m,v),$&&$.m(m,null),u(d,g),w&&w.m(d,null),u(d,y),E&&E.m(d,null),u(a,k)},p(e,a){t=e,2&a&&T!==(T=t[10].user_email+"")&&h(p,T),"1"==t[10].user_role_official||"1"==t[10].user_role_admin?$?$.p(t,a):($=B(t),$.c(),$.m(m,null)):$&&($.d(1),$=null),"1"!=t[10].user_role_admin?w?w.p(t,a):(w=G(t),w.c(),w.m(d,y)):w&&(w.d(1),w=null),"1"!=t[10].user_role_official?E?E.p(t,a):(E=V(t),E.c(),E.m(d,null)):E&&(E.d(1),E=null)},d(e){e&&c(a),$&&$.d(),w&&w.d(),E&&E.d()}}}function K(e){let t,a,h,d,m,p=[],k=new Map,T=e[2].success&&H(e),$=e[1];const w=e=>e[10].user_id;for(let l=0;l<$.length;l+=1){let t=M(e,$,l),a=w(t);k.set(a,p[l]=q(a,t))}return{c(){t=l("h2"),a=n("Admin Table"),h=f(),T&&T.c(),d=f(),m=l("ul");for(let e=0;e<p.length;e+=1)p[e].c()},l(e){t=r(e,"H2",{});var l=o(t);a=s(l,"Admin Table"),l.forEach(c),h=_(e),T&&T.l(e),d=_(e),m=r(e,"UL",{});var n=o(m);for(let t=0;t<p.length;t+=1)p[t].l(n);n.forEach(c)},m(e,l){i(e,t,l),u(t,a),i(e,h,l),T&&T.m(e,l),i(e,d,l),i(e,m,l);for(let t=0;t<p.length;t+=1)p[t].m(m,null)},p(e,[t]){e[2].success?T?T.p(e,t):(T=H(e),T.c(),T.m(d.parentNode,d)):T&&(T.d(1),T=null),3&t&&($=e[1],p=v(p,t,w,1,e,$,k,m,g,q,null,M))},i:y,o:y,d(e){e&&c(t),e&&c(h),T&&T.d(e),e&&c(d),e&&c(m);for(let t=0;t<p.length;t+=1)p[t].d()}}}function z(e,t,a){let l=0,n=[],r={};const o=async()=>{try{const e=await fetch("http://localhost:5000/auth/admin/get-all-users",{method:"GET",headers:{"Content-Type":"application/json",token:localStorage.getItem("token")}}),t=await e.json();if("string"==typeof t)throw t;a(1,n=t.sort())}catch(e){console.log(e)}},s=async e=>{await(async e=>{try{const t=await fetch("http://localhost:5000/auth/admin/set-role",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.getItem("token")},body:JSON.stringify(e)}),l=await t.json();if(console.log(l),"string"==typeof l)throw l;a(2,r=l)}catch(t){console.log(t)}})(e),e.correlated_role,o()};k((async()=>o()));return e.$$.update=()=>{1&e.$$.dirty&&0!=l&&s(l)},[l,n,r,function(){l=this.__value,a(0,l)},[[]],function(){l=this.__value,a(0,l)}]}class F extends e{constructor(e){super(),t(this,e,z,K,a,{})}}function Q(e,t,a){const l=e.slice();return l[13]=t[a],l}function R(e){let t,a,f;return{c(){t=l("p"),a=n("Message:"),f=n(e[1])},l(l){t=r(l,"P",{});var n=o(t);a=s(n,"Message:"),f=s(n,e[1]),n.forEach(c)},m(e,l){i(e,t,l),u(t,a),u(t,f)},p(e,t){2&t&&h(f,e[1])},d(e){e&&c(t)}}}function W(e,t){let a,d,v,g,y,k,T,$,w=t[13].user_email+"";return{key:e,first:null,c(){a=l("li"),d=n(w),v=f(),g=l("input"),k=f(),this.h()},l(e){a=r(e,"LI",{});var t=o(a);d=s(t,w),v=_(t),g=r(t,"INPUT",{type:!0,value:!0}),k=_(t),t.forEach(c),this.h()},h(){m(g,"type","checkbox"),g.__value=y=t[13],g.value=g.__value,t[7][0].push(g),this.first=a},m(e,l){i(e,a,l),u(a,d),u(a,v),u(a,g),g.checked=~t[2].indexOf(g.__value),u(a,k),T||($=p(g,"change",t[6]),T=!0)},p(e,a){t=e,1&a&&w!==(w=t[13].user_email+"")&&h(d,w),1&a&&y!==(y=t[13])&&(g.__value=y,g.value=g.__value),4&a&&(g.checked=~t[2].indexOf(g.__value))},d(e){e&&c(a),t[7][0].splice(t[7][0].indexOf(g),1),T=!1,$()}}}function X(e){let t,a,h,d,k,E,O,I,N,P,b,x,j,U,S,C,L,A,M=[],H=new Map,B=""!=e[1]&&R(e),D=e[0];const J=e=>e[13].user_id;for(let l=0;l<D.length;l+=1){let t=Q(e,D,l),a=J(t);H.set(a,M[l]=W(a,t))}return{c(){t=l("h2"),a=n("Official Table"),h=f(),B&&B.c(),d=f(),k=l("ul");for(let e=0;e<M.length;e+=1)M[e].c();E=f(),O=l("input"),I=f(),N=l("label"),P=l("input"),b=n("Chess\r\n"),x=l("input"),j=n("Tic Tac Toe"),U=f(),S=l("button"),C=n("Create tournament with those  players"),this.h()},l(e){t=r(e,"H2",{});var l=o(t);a=s(l,"Official Table"),l.forEach(c),h=_(e),B&&B.l(e),d=_(e),k=r(e,"UL",{});var n=o(k);for(let t=0;t<M.length;t+=1)M[t].l(n);n.forEach(c),E=_(e),O=r(e,"INPUT",{placeholder:!0}),I=_(e),N=r(e,"LABEL",{});var i=o(N);P=r(i,"INPUT",{type:!0,value:!0}),b=s(i,"Chess\r\n"),x=r(i,"INPUT",{type:!0,value:!0}),j=s(i,"Tic Tac Toe"),i.forEach(c),U=_(e),S=r(e,"BUTTON",{});var u=o(S);C=s(u,"Create tournament with those  players"),u.forEach(c),this.h()},h(){m(O,"placeholder","enter tournament name here"),m(P,"type","radio"),P.__value="chess",P.value=P.__value,e[7][1].push(P),m(x,"type","radio"),x.__value="tic-tac-toe",x.value=x.__value,e[7][1].push(x)},m(l,n){i(l,t,n),u(t,a),i(l,h,n),B&&B.m(l,n),i(l,d,n),i(l,k,n);for(let e=0;e<M.length;e+=1)M[e].m(k,null);i(l,E,n),i(l,O,n),T(O,e[3]),i(l,I,n),i(l,N,n),u(N,P),P.checked=P.__value===e[4],u(N,b),u(N,x),x.checked=x.__value===e[4],u(N,j),i(l,U,n),i(l,S,n),u(S,C),L||(A=[p(O,"input",e[8]),p(P,"change",e[9]),p(x,"change",e[10]),p(S,"click",$(e[5]))],L=!0)},p(e,[t]){""!=e[1]?B?B.p(e,t):(B=R(e),B.c(),B.m(d.parentNode,d)):B&&(B.d(1),B=null),5&t&&(D=e[0],M=v(M,t,J,1,e,D,H,k,g,W,null,Q)),8&t&&O.value!==e[3]&&T(O,e[3]),16&t&&(P.checked=P.__value===e[4]),16&t&&(x.checked=x.__value===e[4])},i:y,o:y,d(a){a&&c(t),a&&c(h),B&&B.d(a),a&&c(d),a&&c(k);for(let e=0;e<M.length;e+=1)M[e].d();a&&c(E),a&&c(O),a&&c(I),a&&c(N),e[7][1].splice(e[7][1].indexOf(P),1),e[7][1].splice(e[7][1].indexOf(x),1),a&&c(U),a&&c(S),L=!1,w(A)}}}function Y(e,t,a){let l=[],n="",r=[],o="",s="";k((async()=>(async()=>{try{const e=await fetch("http://localhost:5001/official/get-all-players",{method:"GET",headers:{"Content-Type":"application/json",token:localStorage.getItem("token")}}),t=await e.json();if("string"==typeof t)throw t;a(0,l=t.sort())}catch(e){console.log(e)}})()));const c=[[],[]];return[l,n,r,o,s,()=>{for(let e=0;e<r.length;e++)a(2,r[e].type="user",r);(async()=>{try{const e=await fetch("http://localhost:5001/official/create-tournament",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.getItem("token")},body:JSON.stringify({tourn_users:r,tournament_name:o,tournament_type:s})}),t=await e.json();a(1,n=t)}catch(e){console.log(e)}})()},function(){r=E(c[0],this.__value,this.checked),a(2,r)},c,function(){o=this.value,a(3,o)},function(){s=this.__value,a(4,s)},function(){s=this.__value,a(4,s)}]}class Z extends e{constructor(e){super(),t(this,e,Y,X,a,{})}}function ee(e){let t,a;return t=new F({}),{c(){O(t.$$.fragment)},l(e){I(t.$$.fragment,e)},m(e,l){N(t,e,l),a=!0},i(e){a||(P(t.$$.fragment,e),a=!0)},o(e){b(t.$$.fragment,e),a=!1},d(e){x(t,e)}}}function te(e){let t,a;return t=new Z({}),{c(){O(t.$$.fragment)},l(e){I(t.$$.fragment,e)},m(e,l){N(t,e,l),a=!0},i(e){a||(P(t.$$.fragment,e),a=!0)},o(e){b(t.$$.fragment,e),a=!1},d(e){x(t,e)}}}function ae(e){let t,a,m,v,g,y,k,T,w,E,O,I,N,x,U,C,L=e[0].user_name+"",A="1"==e[0].user_role_admin&&ee(),M="1"==e[0].user_role_official&&te();return{c(){t=l("h1"),a=n("Profile Page"),m=f(),v=l("p"),g=n("Hello "),y=n(L),k=n(" !!!"),T=f(),w=l("button"),E=n("Log out"),O=f(),A&&A.c(),I=f(),M&&M.c(),N=d()},l(e){t=r(e,"H1",{});var l=o(t);a=s(l,"Profile Page"),l.forEach(c),m=_(e),v=r(e,"P",{});var n=o(v);g=s(n,"Hello "),y=s(n,L),k=s(n," !!!"),n.forEach(c),T=_(e),w=r(e,"BUTTON",{});var i=o(w);E=s(i,"Log out"),i.forEach(c),O=_(e),A&&A.l(e),I=_(e),M&&M.l(e),N=d()},m(l,n){i(l,t,n),u(t,a),i(l,m,n),i(l,v,n),u(v,g),u(v,y),u(v,k),i(l,T,n),i(l,w,n),u(w,E),i(l,O,n),A&&A.m(l,n),i(l,I,n),M&&M.m(l,n),i(l,N,n),x=!0,U||(C=p(w,"click",$(e[1])),U=!0)},p(e,[t]){(!x||1&t)&&L!==(L=e[0].user_name+"")&&h(y,L),"1"==e[0].user_role_admin?A?1&t&&P(A,1):(A=ee(),A.c(),P(A,1),A.m(I.parentNode,I)):A&&(S(),b(A,1,1,(()=>{A=null})),j()),"1"==e[0].user_role_official?M?1&t&&P(M,1):(M=te(),M.c(),P(M,1),M.m(N.parentNode,N)):M&&(S(),b(M,1,1,(()=>{M=null})),j())},i(e){x||(P(A),P(M),x=!0)},o(e){b(A),b(M),x=!1},d(e){e&&c(t),e&&c(m),e&&c(v),e&&c(T),e&&c(w),e&&c(O),A&&A.d(e),e&&c(I),M&&M.d(e),e&&c(N),U=!1,C()}}}function le(e,t,a){let l;U(e,C,(e=>a(0,l=e)));return[l,()=>{C.set({}),L.set(!1),localStorage.removeItem("token"),localStorage.removeItem("user_data"),A("/")}]}export default class extends e{constructor(e){super(),t(this,e,le,ae,a,{})}}
