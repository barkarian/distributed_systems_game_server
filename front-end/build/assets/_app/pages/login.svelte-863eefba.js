import{S as a,i as s,s as t,t as e,b as o,f as n,h as i,d as r,e as l,j as c,c as p,a as u,l as m,o as h,g as d,M as f,H as g,N as y,O as w,n as b,J as v}from"../chunks/index-a2f0fece.js";import{i as S,u as N}from"../chunks/store-bfd594f8.js";import{g as j}from"../chunks/navigation-ecc5701b.js";function O(a){let s;return{c(){s=e(a[1])},l(t){s=o(t,a[1])},m(a,t){n(a,s,t)},p(a,t){2&t&&i(s,a[1])},d(a){a&&r(s)}}}function T(a){let s,t,i,S,N,j,T,k,P,I,x,E,J,U=""!=a[1]&&O(a);return{c(){s=l("h1"),t=e("Login Page"),i=c(),U&&U.c(),S=c(),N=l("form"),j=l("input"),T=c(),k=l("input"),P=c(),I=l("button"),x=e("Submit"),this.h()},l(a){s=p(a,"H1",{});var e=u(s);t=o(e,"Login Page"),e.forEach(r),i=m(a),U&&U.l(a),S=m(a),N=p(a,"FORM",{});var n=u(N);j=p(n,"INPUT",{type:!0,name:!0,placeholder:!0}),T=m(n),k=p(n,"INPUT",{type:!0,name:!0,placeholder:!0}),P=m(n),I=p(n,"BUTTON",{});var l=u(I);x=o(l,"Submit"),l.forEach(r),n.forEach(r),this.h()},h(){h(j,"type","email"),h(j,"name","email"),h(j,"placeholder","email"),h(k,"type","password"),h(k,"name","password"),h(k,"placeholder","password")},m(e,o){n(e,s,o),d(s,t),n(e,i,o),U&&U.m(e,o),n(e,S,o),n(e,N,o),d(N,j),f(j,a[0].email),d(N,T),d(N,k),f(k,a[0].password),d(N,P),d(N,I),d(I,x),E||(J=[g(j,"input",a[3]),g(k,"input",a[4]),g(N,"submit",y((function(){w(a[2](a[0]))&&a[2](a[0]).apply(this,arguments)})))],E=!0)},p(s,[t]){""!=(a=s)[1]?U?U.p(a,t):(U=O(a),U.c(),U.m(S.parentNode,S)):U&&(U.d(1),U=null),1&t&&j.value!==a[0].email&&f(j,a[0].email),1&t&&k.value!==a[0].password&&f(k,a[0].password)},i:b,o:b,d(a){a&&r(s),a&&r(i),U&&U.d(a),a&&r(S),a&&r(N),E=!1,v(J)}}}function k(a,s,t){let e,o;return t(0,e={name:"",password:"",email:""}),t(1,o=""),[e,o,async a=>{try{const s=await fetch("http://localhost:5000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),t=await s.json();if("string"==typeof t)throw t;localStorage.setItem("token",t.token);const e=JSON.stringify(t.user_data);localStorage.setItem("user_data",e),S.set(!0),N.set(t.user_data),j("/profile")}catch(s){t(1,o=s)}},function(){e.email=this.value,t(0,e)},function(){e.password=this.value,t(0,e)}]}export default class extends a{constructor(a){super(),s(this,a,k,T,t,{})}}
