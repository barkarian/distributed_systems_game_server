import{S as e,i as r,s as n,e as t,t as o,j as a,c as i,a as l,b as s,d as u,l as f,f as c,g as p,h,n as m,E as g,Q as v,L as d,A as y,B as E,R as b,o as _,H as w,O as A,p as S,q as $,r as I,w as C,x as k,y as T,C as P,D as N,T as O,U as R,k as L}from"../chunks/index-a2f0fece.js";import{m as q,f as x,c as D,u as U}from"../chunks/store-bfd594f8.js";import{C as Q,a as j,I as K}from"../chunks/vendor-e90a73bf.js";var F,B=(function(e,r){r.Chess=function(e){var r="b",n="w",t=-1,o="p",a="b",i="k",l="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1",s=["1-0","0-1","1/2-1/2","*"],u={b:[16,32,17,15],w:[-16,-32,-17,-15]},f={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},c=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],p=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],h={p:0,n:1,b:2,r:3,q:4,k:5},m={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},g={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},v={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},d={w:[{square:v.a1,flag:g.QSIDE_CASTLE},{square:v.h1,flag:g.KSIDE_CASTLE}],b:[{square:v.a8,flag:g.QSIDE_CASTLE},{square:v.h8,flag:g.KSIDE_CASTLE}]},y=new Array(128),E={w:t,b:t},b=n,_={w:0,b:0},w=t,A=0,S=1,$=[],I={},C={};function k(e){void 0===e&&(e=!1),y=new Array(128),E={w:t,b:t},b=n,_={w:0,b:0},w=t,A=0,S=1,$=[],e||(I={}),C={},q(R())}function T(){for(var e=[],r={},n=function(e){e in C&&(r[e]=C[e])};$.length>0;)e.push(Z());for(n(R());e.length>0;)J(e.pop()),n(R());C=r}function P(){N(l)}function N(e,o){void 0===o&&(o=!1);var a=e.split(/\s+/),i=a[0],l=0;if(!O(e).valid)return!1;k(o);for(var s=0;s<i.length;s++){var u=i.charAt(s);if("/"===u)l+=8;else if(-1!=="0123456789".indexOf(u))l+=parseInt(u,10);else{var f=u<"a"?n:r;D({type:u.toLowerCase(),color:f},ee(l)),l++}}return b=a[1],a[2].indexOf("K")>-1&&(_.w|=g.KSIDE_CASTLE),a[2].indexOf("Q")>-1&&(_.w|=g.QSIDE_CASTLE),a[2].indexOf("k")>-1&&(_.b|=g.KSIDE_CASTLE),a[2].indexOf("q")>-1&&(_.b|=g.QSIDE_CASTLE),w="-"===a[3]?t:v[a[3]],A=parseInt(a[4],10),S=parseInt(a[5],10),q(R()),!0}function O(e){var r="No errors.",n="FEN string must contain six space-delimited fields.",t="6th field (move number) must be a positive integer.",o="5th field (half move counter) must be a non-negative integer.",a="4th field (en-passant square) is invalid.",i="3rd field (castling availability) is invalid.",l="2nd field (side to move) is invalid.",s="1st field (piece positions) does not contain 8 '/'-delimited rows.",u="1st field (piece positions) is invalid [consecutive numbers].",f="1st field (piece positions) is invalid [invalid piece].",c="1st field (piece positions) is invalid [row too large].",p="Illegal en-passant square",h=e.split(/\s+/);if(6!==h.length)return{valid:!1,error_number:1,error:n};if(isNaN(h[5])||parseInt(h[5],10)<=0)return{valid:!1,error_number:2,error:t};if(isNaN(h[4])||parseInt(h[4],10)<0)return{valid:!1,error_number:3,error:o};if(!/^(-|[abcdefgh][36])$/.test(h[3]))return{valid:!1,error_number:4,error:a};if(!/^(KQ?k?q?|Qk?q?|kq?|q|-)$/.test(h[2]))return{valid:!1,error_number:5,error:i};if(!/^(w|b)$/.test(h[1]))return{valid:!1,error_number:6,error:l};var m=h[0].split("/");if(8!==m.length)return{valid:!1,error_number:7,error:s};for(var g=0;g<m.length;g++){for(var v=0,d=!1,y=0;y<m[g].length;y++)if(isNaN(m[g][y])){if(!/^[prnbqkPRNBQK]$/.test(m[g][y]))return{valid:!1,error_number:9,error:f};v+=1,d=!1}else{if(d)return{valid:!1,error_number:8,error:u};v+=parseInt(m[g][y],10),d=!0}if(8!==v)return{valid:!1,error_number:10,error:c}}return"3"==h[3][1]&&"w"==h[1]||"6"==h[3][1]&&"b"==h[1]?{valid:!1,error_number:11,error:p}:{valid:!0,error_number:0,error:r}}function R(){for(var e=0,r="",o=v.a8;o<=v.h1;o++){if(null==y[o])e++;else{e>0&&(r+=e,e=0);var a=y[o].color,i=y[o].type;r+=a===n?i.toUpperCase():i.toLowerCase()}o+1&136&&(e>0&&(r+=e),o!==v.h1&&(r+="/"),e=0,o+=8)}var l="";_.w&g.KSIDE_CASTLE&&(l+="K"),_.w&g.QSIDE_CASTLE&&(l+="Q"),_.b&g.KSIDE_CASTLE&&(l+="k"),_.b&g.QSIDE_CASTLE&&(l+="q"),l=l||"-";var s=w===t?"-":ee(w);return[r,b,l,s,A,S].join(" ")}function L(e){for(var r=0;r<e.length;r+=2)"string"==typeof e[r]&&"string"==typeof e[r+1]&&(I[e[r]]=e[r+1]);return I}function q(e){$.length>0||(e!==l?(I.SetUp="1",I.FEN=e):(delete I.SetUp,delete I.FEN))}function x(e){var r=y[v[e]];return r?{type:r.type,color:r.color}:null}function D(e,r){if(!("type"in e)||!("color"in e))return!1;if(-1==="pnbrqkPNBRQK".indexOf(e.type.toLowerCase()))return!1;if(!(r in v))return!1;var n=v[r];return(e.type!=i||E[e.color]==t||E[e.color]==n)&&(y[n]={type:e.type,color:e.color},e.type===i&&(E[e.color]=n),q(R()),!0)}function U(e,r,n,t,a){var i={color:b,from:r,to:n,flags:t,piece:e[r].type};return a&&(i.flags|=g.PROMOTION,i.promotion=a),e[n]?i.captured=e[n].type:t&g.EP_CAPTURE&&(i.captured=o),i}function Q(e){function r(e,r,n,t,i){if(e[n].type!==o||0!==V(t)&&7!==V(t))r.push(U(e,n,t,i));else for(var l=["q","r",a,"n"],s=0,u=l.length;s<u;s++)r.push(U(e,n,t,i,l[s]))}var n=[],t=b,i=re(t),l={b:1,w:6},s=v.a8,c=v.h1,p=!1,h=void 0===e||!("legal"in e)||e.legal;if(void 0!==e&&"square"in e){if(!(e.square in v))return[];s=c=v[e.square],p=!0}for(var m=s;m<=c;m++)if(136&m)m+=7;else{var d=y[m];if(null!=d&&d.color===t)if(d.type===o){var A=m+u[t][0];for(null==y[A]&&(r(y,n,m,A,g.NORMAL),A=m+u[t][1],l[t]===V(m)&&null==y[A]&&r(y,n,m,A,g.BIG_PAWN)),S=2;S<4;S++)136&(A=m+u[t][S])||(null!=y[A]&&y[A].color===i?r(y,n,m,A,g.CAPTURE):A===w&&r(y,n,m,w,g.EP_CAPTURE))}else for(var S=0,$=f[d.type].length;S<$;S++){var I=f[d.type][S];for(A=m;!(136&(A+=I));){if(null!=y[A]){if(y[A].color===t)break;r(y,n,m,A,g.CAPTURE);break}if(r(y,n,m,A,g.NORMAL),"n"===d.type||"k"===d.type)break}}}if(!p||c===E[t]){if(_[t]&g.KSIDE_CASTLE){var C=(k=E[t])+2;null!=y[k+1]||null!=y[C]||F(i,E[t])||F(i,k+1)||F(i,C)||r(y,n,E[t],C,g.KSIDE_CASTLE)}var k;if(_[t]&g.QSIDE_CASTLE)C=(k=E[t])-2,null!=y[k-1]||null!=y[k-2]||null!=y[k-3]||F(i,E[t])||F(i,k-1)||F(i,C)||r(y,n,E[t],C,g.QSIDE_CASTLE)}if(!h)return n;var T=[];for(m=0,$=n.length;m<$;m++)J(n[m]),B(t)||T.push(n[m]),Z();return T}function j(e,r){var n="";if(e.flags&g.KSIDE_CASTLE)n="O-O";else if(e.flags&g.QSIDE_CASTLE)n="O-O-O";else{var t=function(e,r){for(var n=Q({legal:!r}),t=e.from,o=e.to,a=e.piece,i=0,l=0,s=0,u=0,f=n.length;u<f;u++){var c=n[u].from,p=n[u].to;a===n[u].piece&&t!==c&&o===p&&(i++,V(t)===V(c)&&l++,Y(t)===Y(c)&&s++)}return i>0?l>0&&s>0?ee(t):s>0?ee(t).charAt(1):ee(t).charAt(0):""}(e,r);e.piece!==o&&(n+=e.piece.toUpperCase()+t),e.flags&(g.CAPTURE|g.EP_CAPTURE)&&(e.piece===o&&(n+=ee(e.from)[0]),n+="x"),n+=ee(e.to),e.flags&g.PROMOTION&&(n+="="+e.promotion.toUpperCase())}return J(e),G()&&(H()?n+="#":n+="+"),Z(),n}function K(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function F(e,t){for(var a=v.a8;a<=v.h1;a++)if(136&a)a+=7;else if(null!=y[a]&&y[a].color===e){var i=y[a],l=a-t,s=l+119;if(c[s]&1<<h[i.type]){if(i.type===o){if(l>0){if(i.color===n)return!0}else if(i.color===r)return!0;continue}if("n"===i.type||"k"===i.type)return!0;for(var u=p[s],f=a+u,m=!1;f!==t;){if(null!=y[f]){m=!0;break}f+=u}if(!m)return!0}}return!1}function B(e){return F(re(e),E[e])}function G(){return B(b)}function H(){return G()&&0===Q().length}function M(){return!G()&&0===Q().length}function W(){for(var e={},r=[],n=0,t=0,o=v.a8;o<=v.h1;o++)if(t=(t+1)%2,136&o)o+=7;else{var i=y[o];i&&(e[i.type]=i.type in e?e[i.type]+1:1,i.type===a&&r.push(t),n++)}if(2===n)return!0;if(3===n&&(1===e.b||1===e.n))return!0;if(n===e.b+2){var l=0,s=r.length;for(o=0;o<s;o++)l+=r[o];if(0===l||l===s)return!0}return!1}function X(){for(var e=[],r={},n=!1;;){var t=Z();if(!t)break;e.push(t)}for(;;){var o=R().split(" ").slice(0,4).join(" ");if(r[o]=o in r?r[o]+1:1,r[o]>=3&&(n=!0),!e.length)break;J(e.pop())}return n}function J(e){var n=b,a=re(n);if(function(e){$.push({move:e,kings:{b:E.b,w:E.w},turn:b,castling:{b:_.b,w:_.w},ep_square:w,half_moves:A,move_number:S})}(e),y[e.to]=y[e.from],y[e.from]=null,e.flags&g.EP_CAPTURE&&(b===r?y[e.to-16]=null:y[e.to+16]=null),e.flags&g.PROMOTION&&(y[e.to]={type:e.promotion,color:n}),y[e.to].type===i){if(E[y[e.to].color]=e.to,e.flags&g.KSIDE_CASTLE){var l=e.to-1,s=e.to+1;y[l]=y[s],y[s]=null}else e.flags&g.QSIDE_CASTLE&&(l=e.to+1,s=e.to-2,y[l]=y[s],y[s]=null);_[n]=""}if(_[n])for(var u=0,f=d[n].length;u<f;u++)if(e.from===d[n][u].square&&_[n]&d[n][u].flag){_[n]^=d[n][u].flag;break}if(_[a])for(u=0,f=d[a].length;u<f;u++)if(e.to===d[a][u].square&&_[a]&d[a][u].flag){_[a]^=d[a][u].flag;break}w=e.flags&g.BIG_PAWN?"b"===b?e.to-16:e.to+16:t,e.piece===o||e.flags&(g.CAPTURE|g.EP_CAPTURE)?A=0:A++,b===r&&S++,b=re(b)}function Z(){var e=$.pop();if(null==e)return null;var n=e.move;E=e.kings,b=e.turn,_=e.castling,w=e.ep_square,A=e.half_moves,S=e.move_number;var t,a,i=b,l=re(b);if(y[n.from]=y[n.to],y[n.from].type=n.piece,y[n.to]=null,n.flags&g.CAPTURE)y[n.to]={type:n.captured,color:l};else if(n.flags&g.EP_CAPTURE){var s;s=i===r?n.to-16:n.to+16,y[s]={type:o,color:l}}return n.flags&(g.KSIDE_CASTLE|g.QSIDE_CASTLE)&&(n.flags&g.KSIDE_CASTLE?(t=n.to+1,a=n.to-1):n.flags&g.QSIDE_CASTLE&&(t=n.to-2,a=n.to+1),y[t]=y[a],y[a]=null),n}function z(e,r){var n=K(e);if(r){var t=n.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/);if(t)var o=t[1],a=t[2],i=t[3],l=t[4]}for(var s=Q(),u=0,f=s.length;u<f;u++){if(n===K(j(s[u]))||r&&n===K(j(s[u],!0)))return s[u];if(t&&(!o||o.toLowerCase()==s[u].piece)&&v[a]==s[u].from&&v[i]==s[u].to&&(!l||l.toLowerCase()==s[u].promotion))return s[u]}return null}function V(e){return e>>4}function Y(e){return 15&e}function ee(e){var r=Y(e),n=V(e);return"abcdefgh".substring(r,r+1)+"87654321".substring(n,n+1)}function re(e){return e===n?r:n}function ne(e){var r=te(e);r.san=j(r,!1),r.to=ee(r.to),r.from=ee(r.from);var n="";for(var t in g)g[t]&r.flags&&(n+=m[t]);return r.flags=n,r}function te(e){var r=e instanceof Array?[]:{};for(var n in e)r[n]="object"==typeof n?te(e[n]):e[n];return r}function oe(e){return e.replace(/^\s+|\s+$/g,"")}function ae(e){for(var r=Q({legal:!1}),n=0,t=b,o=0,a=r.length;o<a;o++)J(r[o]),B(t)||(e-1>0?n+=ae(e-1):n++),Z();return n}return N(void 0===e?l:e),{WHITE:n,BLACK:r,PAWN:o,KNIGHT:"n",BISHOP:a,ROOK:"r",QUEEN:"q",KING:i,SQUARES:function(){for(var e=[],r=v.a8;r<=v.h1;r++)136&r?r+=7:e.push(ee(r));return e}(),FLAGS:m,load:function(e){return N(e)},reset:function(){return P()},moves:function(e){for(var r=Q(e),n=[],t=0,o=r.length;t<o;t++)void 0!==e&&"verbose"in e&&e.verbose?n.push(ne(r[t])):n.push(j(r[t],!1));return n},in_check:function(){return G()},in_checkmate:function(){return H()},in_stalemate:function(){return M()},in_draw:function(){return A>=100||M()||W()||X()},insufficient_material:function(){return W()},in_threefold_repetition:function(){return X()},game_over:function(){return A>=100||H()||M()||W()||X()},validate_fen:function(e){return O(e)},fen:function(){return R()},board:function(){for(var e=[],r=[],n=v.a8;n<=v.h1;n++)null==y[n]?r.push(null):r.push({type:y[n].type,color:y[n].color}),n+1&136&&(e.push(r),r=[],n+=8);return e},pgn:function(e){var r="object"==typeof e&&"string"==typeof e.newline_char?e.newline_char:"\n",n="object"==typeof e&&"number"==typeof e.max_width?e.max_width:0,t=[],o=!1;for(var a in I)t.push("["+a+' "'+I[a]+'"]'+r),o=!0;o&&$.length&&t.push(r);for(var i=function(e){var r=C[R()];return void 0!==r&&(e=`${e}${e.length>0?" ":""}{${r}}`),e},l=[];$.length>0;)l.push(Z());var s=[],u="";for(0===l.length&&s.push(i(""));l.length>0;){u=i(u);var f=l.pop();$.length||"b"!==f.color?"w"===f.color&&(u.length&&s.push(u),u=S+"."):u=S+". ...",u=u+" "+j(f,!1),J(f)}if(u.length&&s.push(i(u)),void 0!==I.Result&&s.push(I.Result),0===n)return t.join("")+s.join(" ");var c=function(){return t.length>0&&" "===t[t.length-1]&&(t.pop(),!0)},p=function(e,o){for(var a of o.split(" "))if(a){if(e+a.length>n){for(;c();)e--;t.push(r),e=0}t.push(a),e+=a.length,t.push(" "),e++}return c()&&e--,e},h=0;for(a=0;a<s.length;a++)h+s[a].length>n&&s[a].includes("{")?h=p(h,s[a]):(h+s[a].length>n&&0!==a?(" "===t[t.length-1]&&t.pop(),t.push(r),h=0):0!==a&&(t.push(" "),h++),t.push(s[a]),h+=s[a].length);return t.join("")},load_pgn:function(e,r){var n=void 0!==r&&"sloppy"in r&&r.sloppy;function t(e){return e.replace(/\\/g,"\\")}var o="object"==typeof r&&"string"==typeof r.newline_char?r.newline_char:"\r?\n",a=new RegExp("^(\\[((?:"+t(o)+")|.)*\\])(?:"+t(o)+"){2}"),i=a.test(e)?a.exec(e)[1]:"";P();var l=function(e,r){for(var n="object"==typeof r&&"string"==typeof r.newline_char?r.newline_char:"\r?\n",o={},a=e.split(new RegExp(t(n))),i="",l="",s=0;s<a.length;s++)i=a[s].replace(/^\[([A-Z][A-Za-z]*)\s.*\]$/,"$1"),l=a[s].replace(/^\[[A-Za-z]+\s"(.*)"\ *\]$/,"$1"),oe(i).length>0&&(o[i]=l);return o}(i,r);for(var u in l)L([u,l[u]]);if(!("1"!==l.SetUp||"FEN"in l&&N(l.FEN,!0)))return!1;for(var f=function(e){return`{${function(e){return Array.from(e).map((function(e){return e.charCodeAt(0)<128?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/\%/g,"").toLowerCase()})).join("")}((e=e.replace(new RegExp(t(o),"g")," ")).slice(1,e.length-1))}}`},c=function(e){if(e.startsWith("{")&&e.endsWith("}"))return function(e){return 0==e.length?"":decodeURIComponent("%"+e.match(/.{1,2}/g).join("%"))}(e.slice(1,e.length-1))},p=e.replace(i,"").replace(new RegExp(`({[^}]*})+?|;([^${t(o)}]*)`,"g"),(function(e,r,n){return void 0!==r?f(r):" "+f(`{${n.slice(1)}}`)})).replace(new RegExp(t(o),"g")," "),h=/(\([^\(\)]+\))+?/g;h.test(p);)p=p.replace(h,"");var m=oe(p=(p=(p=p.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).split(new RegExp(/\s+/));m=m.join(",").replace(/,,+/g,",").split(",");for(var g="",v=0;v<m.length-1;v++){var d=c(m[v]);if(void 0===d){if(null==(g=z(m[v],n)))return!1;J(g)}else C[R()]=d}if(void 0!==(d=c(m[m.length-1]))&&(C[R()]=d,m.pop()),g=m[m.length-1],s.indexOf(g)>-1)(function(e){for(var r in e)return!0;return!1})(I)&&void 0===I.Result&&L(["Result",g]);else{if(null==(g=z(g,n)))return!1;J(g)}return!0},header:function(){return L(arguments)},ascii:function(){return function(){for(var e="   +------------------------+\n",r=v.a8;r<=v.h1;r++){if(0===Y(r)&&(e+=" "+"87654321"[V(r)]+" |"),null==y[r])e+=" . ";else{var t=y[r].type;e+=" "+(y[r].color===n?t.toUpperCase():t.toLowerCase())+" "}r+1&136&&(e+="|\n",r+=8)}return(e+="   +------------------------+\n")+"     a  b  c  d  e  f  g  h\n"}()},turn:function(){return b},move:function(e,r){var n=void 0!==r&&"sloppy"in r&&r.sloppy,t=null;if("string"==typeof e)t=z(e,n);else if("object"==typeof e)for(var o=Q(),a=0,i=o.length;a<i;a++)if(e.from===ee(o[a].from)&&e.to===ee(o[a].to)&&(!("promotion"in o[a])||e.promotion===o[a].promotion)){t=o[a];break}if(!t)return null;var l=ne(t);return J(t),l},undo:function(){var e=Z();return e?ne(e):null},clear:function(){return k()},put:function(e,r){return D(e,r)},get:function(e){return x(e)},remove:function(e){return function(e){var r=x(e);return y[v[e]]=null,r&&r.type===i&&(E[r.color]=t),q(R()),r}(e)},perft:function(e){return ae(e)},square_color:function(e){if(e in v){var r=v[e];return(V(r)+Y(r))%2==0?"light":"dark"}return null},history:function(e){for(var r=[],n=[],t=(void 0!==e&&"verbose"in e&&e.verbose);$.length>0;)r.push(Z());for(;r.length>0;){var o=r.pop();t?n.push(ne(o)):n.push(j(o)),J(o)}return n},get_comment:function(){return C[R()]},set_comment:function(e){C[R()]=e.replace("{","[").replace("}","]")},delete_comment:function(){var e=C[R()];return delete C[R()],e},get_comments:function(){return T(),Object.keys(C).map((function(e){return{fen:e,comment:C[e]}}))},delete_comments:function(){return T(),Object.keys(C).map((function(e){var r=C[e];return delete C[e],{fen:e,comment:r}}))}}}}(F={exports:{}},F.exports),F.exports);function G(e){let r,n,g,v,d,y,E,b,_,w,A,S;return{c(){r=t("p"),n=o("In check:"),g=o(e[0]),v=a(),d=t("p"),y=o("In checkmate:"),E=o(e[1]),b=a(),_=t("p"),w=o(e[3]),A=a(),S=t("div")},l(t){r=i(t,"P",{});var o=l(r);n=s(o,"In check:"),g=s(o,e[0]),o.forEach(u),v=f(t),d=i(t,"P",{});var a=l(d);y=s(a,"In checkmate:"),E=s(a,e[1]),a.forEach(u),b=f(t),_=i(t,"P",{});var c=l(_);w=s(c,e[3]),c.forEach(u),A=f(t),S=i(t,"DIV",{}),l(S).forEach(u)},m(t,o){c(t,r,o),p(r,n),p(r,g),c(t,v,o),c(t,d,o),p(d,y),p(d,E),c(t,b,o),c(t,_,o),p(_,w),c(t,A,o),c(t,S,o),e[7](S)},p(e,[r]){1&r&&h(g,e[0]),2&r&&h(E,e[1]),8&r&&h(w,e[3])},i:m,o:m,d(n){n&&u(r),n&&u(v),n&&u(d),n&&u(b),n&&u(_),n&&u(A),n&&u(S),e[7](null)}}}function H(e,r,n){let t,o;g(e,q,(e=>n(10,t=e))),g(e,x,(e=>n(11,o=e)));let a,i,l,s,u,f,{playingFirst:c}=r,{fen:p}=r,{myturn:h=!0}=r;function m(e){if(e.type===K.moveDone){const r={from:e.squareFrom,to:e.squareTo},n=a.move(r);return n&&h?(d(q,t=r,t),d(x,o=a.fen(),o)):h?console.warn("invalid move",r):e.chessboard.disableMoveInput(),n}return!0}return v((async()=>{await u.destroy(),d(x,o="",o),d(q,t="",t)})),y((async()=>{a=new B.Chess(p),u.setPosition(a.fen()),n(0,i=a.in_check()),n(1,l=a.in_checkmate()),!1===c&&u.setOrientation(Q.black),h?(1==a.in_checkmate()?n(3,f="Game is finished :you lost 🥺"):1==a.in_stalemate()?n(3,f="Game is finished :It's a tie 👔"):n(3,f="Game in Progress 🔥"),u.enableMoveInput(m)):(1==a.in_checkmate()?n(3,f="Game is finished :you Win 😎"):1==a.in_stalemate()?(console.log(a.in_stalemate()),n(3,f="Game is finished :It's a tie 👔")):n(3,f="Game in Progress 🔥"),u.disableMoveInput(m))})),E((async()=>{(()=>{const e=document.createElement("div");e.id="board1",e.style="width: 400px",s.appendChild(e),u=new j(document.getElementById("board1"),{position:"start",sprite:{url:"/assets/images/chessboard-sprite-staunty.svg"},orientation:Q.white})})()})),e.$$set=e=>{"playingFirst"in e&&n(4,c=e.playingFirst),"fen"in e&&n(5,p=e.fen),"myturn"in e&&n(6,h=e.myturn)},[i,l,s,f,c,p,h,function(e){b[e?"unshift":"push"]((()=>{s=e,n(2,s)}))}]}class M extends e{constructor(e){super(),r(this,e,H,G,n,{playingFirst:4,fen:5,myturn:6})}}function W(e){let r,n,a,f,g=(e[0]||"")+"";return{c(){r=t("button"),n=o(g),this.h()},l(e){r=i(e,"BUTTON",{class:!0});var t=l(r);n=s(t,g),t.forEach(u),this.h()},h(){_(r,"class","square svelte-1yp11ow")},m(t,o){c(t,r,o),p(r,n),a||(f=w(r,"click",(function(){A(e[1])&&e[1].apply(this,arguments)})),a=!0)},p(r,[t]){e=r,1&t&&g!==(g=(e[0]||"")+"")&&h(n,g)},i:m,o:m,d(e){e&&u(r),a=!1,f()}}}function X(e,r,n){let{value:t}=r,{handleClick:o}=r;return e.$$set=e=>{"value"in e&&n(0,t=e.value),"handleClick"in e&&n(1,o=e.handleClick)},[t,o]}class J extends e{constructor(e){super(),r(this,e,X,W,n,{value:0,handleClick:1})}}function Z(e,r,n){const t=e.slice();return t[10]=r[n],t[12]=n,t}function z(e){let r,n;return{c(){r=t("h3"),n=o(e[5]),this.h()},l(t){r=i(t,"H3",{class:!0});var o=l(r);n=s(o,e[5]),o.forEach(u),this.h()},h(){_(r,"class","svelte-dt6evk")},m(e,t){c(e,r,t),p(r,n)},p(e,r){32&r&&h(n,e[5])},d(e){e&&u(r)}}}function V(e){let r,n;return{c(){r=t("h3"),n=o(e[4]),this.h()},l(t){r=i(t,"H3",{class:!0});var o=l(r);n=s(o,e[4]),o.forEach(u),this.h()},h(){_(r,"class","svelte-dt6evk")},m(e,t){c(e,r,t),p(r,n)},p(e,r){16&r&&h(n,e[4])},d(e){e&&u(r)}}}function Y(e){let r,n;return r=new J({props:{value:e[10],handleClick:function(){return e[7](e[12])}}}),{c(){S(r.$$.fragment)},l(e){$(r.$$.fragment,e)},m(e,t){I(r,e,t),n=!0},p(n,t){e=n;const o={};1&t&&(o.value=e[10]),r.$set(o)},i(e){n||(C(r.$$.fragment,e),n=!0)},o(e){k(r.$$.fragment,e),n=!1},d(e){T(r,e)}}}function ee(e){let r,n,m,g,v,d,y,E,b,w,A,S,$,I,T,R,L,q,x;function D(e,r){return e[4]?V:z}let U=D(e),Q=U(e),j=e[0],K=[];for(let t=0;t<j.length;t+=1)K[t]=Y(Z(e,j,t));const F=e=>k(K[e],1,1,(()=>{K[e]=null}));return{c(){Q.c(),r=a(),n=t("h3"),m=o("iAmX "),g=o(e[1]),v=a(),d=t("h3"),y=o("winner "),E=o(re),b=a(),w=t("h3"),A=o("my turn"),S=o(e[2]),$=a(),I=t("h3"),T=o("xIsNext "),R=o(e[3]),L=a(),q=t("div");for(let e=0;e<K.length;e+=1)K[e].c();this.h()},l(t){Q.l(t),r=f(t),n=i(t,"H3",{class:!0});var o=l(n);m=s(o,"iAmX "),g=s(o,e[1]),o.forEach(u),v=f(t),d=i(t,"H3",{class:!0});var a=l(d);y=s(a,"winner "),E=s(a,re),a.forEach(u),b=f(t),w=i(t,"H3",{class:!0});var c=l(w);A=s(c,"my turn"),S=s(c,e[2]),c.forEach(u),$=f(t),I=i(t,"H3",{class:!0});var p=l(I);T=s(p,"xIsNext "),R=s(p,e[3]),p.forEach(u),L=f(t),q=i(t,"DIV",{class:!0});var h=l(q);for(let e=0;e<K.length;e+=1)K[e].l(h);h.forEach(u),this.h()},h(){_(n,"class","svelte-dt6evk"),_(d,"class","svelte-dt6evk"),_(w,"class","svelte-dt6evk"),_(I,"class","svelte-dt6evk"),_(q,"class","board svelte-dt6evk")},m(e,t){Q.m(e,t),c(e,r,t),c(e,n,t),p(n,m),p(n,g),c(e,v,t),c(e,d,t),p(d,y),p(d,E),c(e,b,t),c(e,w,t),p(w,A),p(w,S),c(e,$,t),c(e,I,t),p(I,T),p(I,R),c(e,L,t),c(e,q,t);for(let r=0;r<K.length;r+=1)K[r].m(q,null);x=!0},p(e,[n]){if(U===(U=D(e))&&Q?Q.p(e,n):(Q.d(1),Q=U(e),Q&&(Q.c(),Q.m(r.parentNode,r))),(!x||2&n)&&h(g,e[1]),(!x||4&n)&&h(S,e[2]),(!x||8&n)&&h(R,e[3]),65&n){let r;for(j=e[0],r=0;r<j.length;r+=1){const t=Z(e,j,r);K[r]?(K[r].p(t,n),C(K[r],1)):(K[r]=Y(t),K[r].c(),C(K[r],1),K[r].m(q,null))}for(P(),r=j.length;r<K.length;r+=1)F(r);N()}},i(e){if(!x){for(let e=0;e<j.length;e+=1)C(K[e]);x=!0}},o(e){K=K.filter(Boolean);for(let r=0;r<K.length;r+=1)k(K[r]);x=!1},d(e){Q.d(e),e&&u(r),e&&u(n),e&&u(v),e&&u(d),e&&u(b),e&&u(w),e&&u($),e&&u(I),e&&u(L),e&&u(q),O(K,e)}}}let re="none";function ne(e){const r=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let n=0;n<r.length;n++){const[t,o,a]=r[n];if(e[t]&&e[t]===e[o]&&e[t]===e[a])return`Winner: ${e[t]}`}return e.every((e=>null!==e))?"It's a draw":null}function te(e,r,n){let t,o,a;g(e,x,(e=>n(8,o=e))),g(e,q,(e=>n(9,a=e)));let i,{iAmX:l=!0}=r,{myturn:s}=r,{squares:u}=r,f=null;function c(e){if(!s)return;u[e]||(n(0,u[e]=i?"X":"0",u),n(3,i=!i),n(4,f=ne(u)),console.log({msg:"everything works fine",winnerMsg:f})),d(x,o=JSON.stringify(u),o);const r={player:i?"X":"0",from:"",to:`${e}`};if(f)switch(f){case"Winner: X":r.player="win";break;case"Winner: 0":r.player="win",console.log(l);break;case"It's a draw":r.player="tie",console.log("tie")}console.log(r),d(q,a=r,a)}y((async()=>{n(4,f=ne(u))})),v((async()=>{d(x,o="",o),d(q,a="",a)}));return e.$$set=e=>{"iAmX"in e&&n(1,l=e.iAmX),"myturn"in e&&n(2,s=e.myturn),"squares"in e&&n(0,u=e.squares)},e.$$.update=()=>{6&e.$$.dirty&&n(3,i=!!(l&&1==s||!l&&0==s)),8&e.$$.dirty&&n(5,t="Next Player: "+(i?"X":"0"))},[u,l,s,i,f,t,c,e=>c(e)]}class oe extends e{constructor(e){super(),r(this,e,te,ee,n,{iAmX:1,myturn:2,squares:0})}}function ae(e){let r,n,m,g,v,d,y,E;return y=new oe({props:{iAmX:e[0],myturn:e[2],squares:e[3]}}),{c(){r=t("p"),n=o(e[2]),m=a(),g=t("p"),v=o(e[1]),d=a(),S(y.$$.fragment)},l(t){r=i(t,"P",{});var o=l(r);n=s(o,e[2]),o.forEach(u),m=f(t),g=i(t,"P",{});var a=l(g);v=s(a,e[1]),a.forEach(u),d=f(t),$(y.$$.fragment,t)},m(e,t){c(e,r,t),p(r,n),c(e,m,t),c(e,g,t),p(g,v),c(e,d,t),I(y,e,t),E=!0},p(e,[r]){(!E||4&r)&&h(n,e[2]),(!E||2&r)&&h(v,e[1]);const t={};1&r&&(t.iAmX=e[0]),4&r&&(t.myturn=e[2]),8&r&&(t.squares=e[3]),y.$set(t)},i(e){E||(C(y.$$.fragment,e),E=!0)},o(e){k(y.$$.fragment,e),E=!1},d(e){e&&u(r),e&&u(m),e&&u(g),e&&u(d),T(y,e)}}}function ie(e,r,n){let t,{playingFirst:o}=r,{fen:a}=r,{myturn:i=!0}=r;return R((async()=>{n(3,t=JSON.parse(a))})),e.$$set=e=>{"playingFirst"in e&&n(0,o=e.playingFirst),"fen"in e&&n(1,a=e.fen),"myturn"in e&&n(2,i=e.myturn)},[o,a,i,t]}class le extends e{constructor(e){super(),r(this,e,ie,ae,n,{playingFirst:0,fen:1,myturn:2})}}function se(e){let r,n,a;return{c(){r=t("h3"),n=o(e[1]),a=o("'s turn")},l(t){r=i(t,"H3",{});var o=l(r);n=s(o,e[1]),a=s(o,"'s turn"),o.forEach(u)},m(e,t){c(e,r,t),p(r,n),p(r,a)},p(e,r){2&r&&h(n,e[1])},d(e){e&&u(r)}}}function ue(e){let r,n;return{c(){r=t("h3"),n=o("You're turn")},l(e){r=i(e,"H3",{});var t=l(r);n=s(t,"You're turn"),t.forEach(u)},m(e,t){c(e,r,t),p(r,n)},p:m,d(e){e&&u(r)}}}function fe(e){let r,n;return r=new le({props:{playingFirst:e[2],fen:e[5],myturn:e[0]}}),{c(){S(r.$$.fragment)},l(e){$(r.$$.fragment,e)},m(e,t){I(r,e,t),n=!0},p(e,n){const t={};4&n&&(t.playingFirst=e[2]),32&n&&(t.fen=e[5]),1&n&&(t.myturn=e[0]),r.$set(t)},i(e){n||(C(r.$$.fragment,e),n=!0)},o(e){k(r.$$.fragment,e),n=!1},d(e){T(r,e)}}}function ce(e){let r,n;return r=new M({props:{playingFirst:e[2],fen:e[5],myturn:e[0]}}),{c(){S(r.$$.fragment)},l(e){$(r.$$.fragment,e)},m(e,t){I(r,e,t),n=!0},p(e,n){const t={};4&n&&(t.playingFirst=e[2]),32&n&&(t.fen=e[5]),1&n&&(t.myturn=e[0]),r.$set(t)},i(e){n||(C(r.$$.fragment,e),n=!0)},o(e){k(r.$$.fragment,e),n=!1},d(e){T(r,e)}}}function pe(e){let r,n,m,g,v,d,y,E,b;function _(e,r){return 1==e[0]?ue:se}let w=_(e),A=w(e);const S=[ce,fe],$=[];function I(e,r){return"chess"==e[3]?0:"tic-tac-toe"==e[3]?1:-1}return~(d=I(e))&&(y=$[d]=S[d](e)),{c(){r=t("h1"),n=o("match_id is:"),m=o(e[4]),g=a(),A.c(),v=a(),y&&y.c(),E=L()},l(t){r=i(t,"H1",{});var o=l(r);n=s(o,"match_id is:"),m=s(o,e[4]),o.forEach(u),g=f(t),A.l(t),v=f(t),y&&y.l(t),E=L()},m(e,t){c(e,r,t),p(r,n),p(r,m),c(e,g,t),A.m(e,t),c(e,v,t),~d&&$[d].m(e,t),c(e,E,t),b=!0},p(e,[r]){(!b||16&r)&&h(m,e[4]),w===(w=_(e))&&A?A.p(e,r):(A.d(1),A=w(e),A&&(A.c(),A.m(v.parentNode,v)));let n=d;d=I(e),d===n?~d&&$[d].p(e,r):(y&&(P(),k($[n],1,1,(()=>{$[n]=null})),N()),~d?(y=$[d],y?y.p(e,r):(y=$[d]=S[d](e),y.c()),C(y,1),y.m(E.parentNode,E)):y=null)},i(e){b||(C(y),b=!0)},o(e){k(y),b=!1},d(e){e&&u(r),e&&u(g),A.d(e),e&&u(v),~d&&$[d].d(e),e&&u(E)}}}function he(e,r,n){let t,o,a,i;g(e,D,(e=>n(4,t=e))),g(e,U,(e=>n(8,o=e))),g(e,x,(e=>n(5,a=e))),g(e,q,(e=>n(7,i=e)));let l,s,u=!0,f=!0;let c;return E((async()=>{await(async()=>{try{const e=await fetch("http://localhost:5002/game/get-match-data",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.getItem("token")},body:JSON.stringify({match_id:t})}),r=await e.json();if("string"==typeof r)throw r;n(3,s=r.game_type),n(2,f=o.user_email==r.player1_email),o.user_email==r.player1_email?n(1,l=r.player2_email):n(1,l=r.player1_email),d(x,a=r.fen,a),r.cur_player==o.user_email?n(0,u=!0):n(0,u=!1)}catch(e){displayError=e}})()})),v((async()=>{d(D,t="",t),clearInterval(c)})),e.$$.update=()=>{65&e.$$.dirty&&(0==u?n(6,c=setInterval((()=>(async()=>{try{const e=await fetch("http://localhost:5002/game/my-turn",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.getItem("token")},body:JSON.stringify({match_id:t})}),r=await e.json();if("string"==typeof r)throw r;r.success&&(n(0,u=!0),d(x,a=r.match.fen,a))}catch(e){displayError=e}})()),1e3)):1==u&&clearInterval(c)),128&e.$$.dirty&&""!=i&&(async()=>{try{const e=await fetch("http://localhost:5002/game/make-move",{method:"POST",headers:{"Content-Type":"application/json",token:localStorage.getItem("token")},body:JSON.stringify({match_id:t,move:i,fen:a})}),r=await e.json();if("string"==typeof r)throw r;n(0,u=!1),d(x,a=r.fen,a)}catch(e){displayError=e}})()},[u,l,f,s,t,a,c,i]}export default class extends e{constructor(e){super(),r(this,e,he,pe,n,{})}}
